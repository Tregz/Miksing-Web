<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="HandheldFriendly" content="True">
<!--<meta name="MobileOptimized" content="320">-->
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Miksing</title>
<meta name="description" content="Mixing mobile app for iOS and Android">
<meta name="keywords" content="miksing, mixing app, ios app, android app" />
<meta name="author" content="Jerome Robbins" />
<meta name="google-site-verification" content="r-cEmbTfhA96_o4IjDz3gfeZM1BviKhfIcg9RybP32A" />
<meta property="fb:admins" content="740432666" />
<meta property="og:title" content="Miksing" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.miksing.com/" />
<meta property="og:description" content="Mixing mobile app for iOS and Android" />
<meta property="og:image" content="http://www.tregz.com/miksing/graph/sm_logo.jpg" />
<meta property="og:image:secure_url" content="https://www.tregz.com/miksing/graph/sm_logo.jpg" />
<meta property="og:image:width" content="960" />
<meta property="og:image:height" content="960" /><!---->
<link rel="stylesheet" href="frame/article.css">
<link rel="stylesheet" href="frame/body.css">
<link rel="stylesheet" href="frame/compute.css">
<link rel="stylesheet" href="frame/divide.css">
<link rel="stylesheet" href="frame/events.css">
<link rel="stylesheet" href="frame/footer.css">
<link rel="stylesheet" href="frame/graphic.css">
<link rel="stylesheet" href="frame/header.css">
<!---->
</head>
<body>
<nav><ul class="sideline">
	<a href="#"><img src="graph/ic_logo.svg" id="logo">
	<li id="here" class="left"><span id="name">Miksing</span></li></a>
	<li class="menu"><input type="checkbox" id="sign">
	<label for="sign"><img src="graph/ic_key.svg" class="icon"><span>Log In</span></label><div class="down">
	<input id="courriel" type="text" placeholder="Email"/>
    <input id="password" type="password" placeholder="Password"/>
    <!--<input id="username" type="text" placeholder="Name"/>-->
    <button id="sign-in" name="signin">Continue</button>
    <button id="sign-up" name="signup">Sign Up</button>
    <button id="validate" name="validate">Validate</button>
    <button id="canceler" name="cancel">Cancel</button>
    <!--<button id="password-reset">Reset Password</button>-->
	</div></li><!--
	<a href="http://github.com/Tregz/Miksing"><li class="menu"><span>iOS</span></li></a>
	<a href="http://github.com/Tregz/Miksing-Android"><li class="menu"><span>Android</span></li></a>-->
	<input type="checkbox" id="lang" checked><label for="lang"><img src="graph/ic_language.svg" class="icon"></label>
	<li class="side"><a href="index-fr.html"><span>Français</span></a></li>
</ul></nav>
<div class="main">
<input id="tab1" type="radio" name="tabs" checked>
<input id="tab2" type="radio" name="tabs">
<input id="tab3" type="radio" name="tabs">
<input id="tab4" type="radio" name="tabs">
<header class="sideline"><div id="tv">
	<div id="player_0"></div>
	<div id="player_1"></div>
	<div class="centered">
		<h2>A simple multimedia mixing app</h2>
		<h1>University project</h1>
	</div></div>
	<input type="checkbox" class="expand" id="info" checked><ul>
	<label for="tab1" class="content1">
	<li class="menu">Apero</li></label>
	<label for="tab2" class="content2">
	<li class="menu">Bistro</li></label>
	<label for="tab3" class="content3">
	<li class="menu">Club</li></label>
	<label for="tab4" class="content4">
	<li class="menu">Dance</li></label><!---->
	<label for="info"><li class="side">
	About <img src="graph/ic_expand.svg" class="icon">
	</li></label></ul>
	<article><img src="graph/sm_logo.jpg" class="small">
		<input type="checkbox" id="contact" class="expand">
		<p>This is the web version of a mobile cross-platform app for multimedia mixing. The application is a student project developped for computing studies at <a href="http://uqtr.ca/">Université du Québec à Trois-Rivières</a>. The repository is public on GitHub in <a href="http://github.com/Tregz/Miksing">swift</a> (with CoreData) for iOS and <a href="http://github.com/Tregz/Miksing-Android">java</a> (with SQL) for Android. Both mobile devices can synchronize data through Google's Firebase.</p>
		<aside class="expand"><label for="contact">
			<img src="graph/ic_email.svg" class="icon"></label></aside>
		<form name="contactform" method="post" action="datas/contact.php" id="contact_form">
		<h2>For additionnal infos</h2>
		<table>
			<tr><td><input type="text" name="name" maxlength="50" placeholder="Name *"></td></tr>
			<tr><td><input type="text" name="mail" maxlength="80" placeholder="Email *"></td></tr>
			<tr><td><textarea name="body" maxlength="1000" rows="6" placeholder="Details..."></textarea></td></tr>
			<tr><td><input type="submit" value="Send"></td></tr>
		</table></form>
	</article>
</header>
	<article class="sideline"><h4>Updates 2017</h4>
	<p>09-06. Firebase authentification for existing users.</p>
	<p>09-05. Auto transition when video is almost over - not yet fully supported on mobile.</p>
	<p>08-29. Audio fade transition when video is ready, switching visual halfway.</p></article>
	<!--<div id="console"></div>-->	
<section id="content1" class="sideline">
	<article><aside class="hashtags">#tropical #newwave #2016</aside>
		<a onClick="mixing('dIK81cpOXYg')">
		<img src="http://img.youtube.com/vi/dIK81cpOXYg/0.jpg" class="small">
		<h3>Take On Me</h3><h4>A-Ha</h4>
		<p>by Kygo; video edit by Tremenz</p></a> 
	</article>
	<article><aside class="hashtags">#tropical #rnb #2015</aside>
		<a onClick="mixing('5-q3meXJ6W4')">
		<img src="http://img.youtube.com/vi/5-q3meXJ6W4/0.jpg" class="small">
		<h3>I'm Real</h3><h4>Jennifer Lopez</h4>
		<p>by Pegato; video edit by Tremenz</p></a>
	</article>
	<article><aside class="hashtags">#pop #2015</aside>
		<a onClick="mixing('V7t1SToZ-i8')">
		<img src="http://img.youtube.com/vi/V7t1SToZ-i8/0.jpg" class="small">
		<h3>Problem</h3><h4>Ariana Grande</h4>
		<p>by Bauke Top; video edit by Tremenz</p></a>
	</article>
</section>
<section id="content2" class="sideline">
	<article><aside class="hashtags">#folk #mashup #reggae #2015</aside>
		<a onClick="mixing('UHElD61QBKY')">
		<img src="http://img.youtube.com/vi/UHElD61QBKY/0.jpg" class="small">
		<h3>The Only One Moon Rising</h3><h4>CCR vs Sam Smith vs Bob Marley</h4>
		<p>by DRA'Man; video edit by Tremenz</p></a>
	</article>
	<article><aside class="hashtags">#ballad #mashup #2015</aside>
		<a onClick="mixing('WkyNf6GBI6M')">
		<img src="http://img.youtube.com/vi/WkyNf6GBI6M/0.jpg" class="small">
		<h3>Safe And Sound</h3><h4>Capital Cities</h4>
		<p>by Dylan Vasey; video edit by Tremenz</p></a>
	</article>
	<article><aside class="hashtags">#tropical #rock #2015</aside>
		<a onClick="mixing('c8cDM2PN_kY')">
		<img src="http://img.youtube.com/vi/c8cDM2PN_kY/0.jpg" class="small">
		<h3>I Bet My Life</h3><h4>Imagine Dragons</h4>
		<p>by Alex Adair; video edit by Tremenz</p></a>
	</article>
</section>
<section id="content3" class="sideline">
	<article><aside class="hashtags">#tropical #hiphop #2016</aside>
		<a onClick="mixing('JG9W2TwDtOM')">
		<img src="http://img.youtube.com/vi/JG9W2TwDtOM/0.jpg" class="small">
		<h3>In Da Club</h3><h4>50 Cent</h4>
		<p>by Naxsy &amp; Rolf Dyman; video edit by Tremenz</p></a>
	</article>
	<article><aside class="hashtags">#pop #2015</aside>
		<a onClick="mixing('_fPaBhR21Vw')">
		<img src="http://img.youtube.com/vi/_fPaBhR21Vw/0.jpg" class="small">
		<h3>Promiscuous</h3><h4>Nelly Furtado</h4>
		<p>by Basic Tape; video edit by Tremenz</p></a>
	</article>
	<article><aside class="hashtags">#trap #mainstream #2015</aside>
		<a onClick="mixing('YB_z0Z3msAQ')">
		<img src="http://img.youtube.com/vi/YB_z0Z3msAQ/0.jpg" class="small">
		<h3>Coco</h3><h4>Ed Sheeran</h4>
		<p>by Hitimpulse; video edit by Tremenz</p></a>
	</article>
</section>
<section id="content4" class="sideline">
	<article><aside class="hashtags">#house #2016</aside>
	<a onClick="mixing('AldrdUYHFK4')">
		<img src="http://img.youtube.com/vi/AldrdUYHFK4/0.jpg" class="small">
		<h3>Oye Como Va</h3><h4>Santana vs Dusty Springfield</h4>
		<p>mix by DJ Palermo; video edit by Tremenz</p></a>
	</article>
	<article><aside class="hashtags">#funk #house #soul #2016</aside>
		<a onClick="mixing('h1gcPNMC0J4')">
		<img src="http://img.youtube.com/vi/h1gcPNMC0J4/0.jpg" class="small">
		<h3>All I Do</h3><h4>Stevie Wonder</h4>
		<p>by Audio Jacker; video edit by Tremenz</p></a>
	</article>
	<article><aside class="hashtags">#ballad #house #2015</aside>
		<a onClick="mixing('scMATf60KWI')">
		<img src="http://img.youtube.com/vi/scMATf60KWI/0.jpg" class="small">
		<h3>Redemption Song</h3><h4>Mitchell Brunings</h4>
		<p>by Koni; video edit by Tremenz</p></a>
	</article>
</section>
</div>
<footer>website by <a href="mailto:jerome@tregz.com">jerome</a>@
<a href="http://www.tregz.com">tregz.com</a> &copy;2017</footer>
</body><!--
<style>@charset "UTF-8";article img.small,form{-webkit-transition:all 333ms ease-out;-moz-transition:all 333ms ease-out;-o-transition:all 333ms ease-out;-ms-transition:all 333ms ease-out}article a,aside{color:#606}h1,h3{color:#a06}form h2,form input{padding-left:5px}footer a,li{font-weight:700}article a,header label,nav img.icon{cursor:pointer}article{background-color:#fff;border:1px solid #fdd;border-radius:10px;margin-bottom:0;margin-top:10px;padding:15px 15px 5px;opacity:1;overflow:hidden;position:relative;text-align:justify}article h3{padding-bottom:5px}article img.small{width:150px;max-height:150px;float:left;margin-right:15px;margin-bottom:10px;transition:all 333ms ease-out}article p{margin:5px 0 0}aside{padding:5px 10px;right:0}aside.hashtags{background:#fee;border:1px solid #fdd;border-bottom-left-radius:10px;border-top-right-radius:10px;border-right:none;border-top:none;position:absolute;top:0}aside.expand,section{position:relative}aside.expand{text-align:right;margin-bottom:-5px;padding-right:0;z-index:2}.centered,footer,form h2{text-align:center}body,form h2,h4{margin:0}@media only screen and (max-width:35em){article img.small{width:auto;width:50px;margin-bottom:0}}iframe,img{width:100%}*,:after,:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}a{text-decoration:none}body{background:#fed;font-family:Arial,Segoe,"Segoe UI",Verdana,sans-serif;font-size:16px;line-height:1.33}iframe{height:100%;left:0;position:absolute;top:0;visibility:hidden;z-index:1}img.icon{height:24px;width:auto}h1{font-family:Constantia,"Lucida Bright",Georgia,serif;text-transform:uppercase;padding-bottom:35px}footer,h2{font-family:Consolas,"Andale Mono",Monaco,monospace}h3{margin-bottom:0}li{display:inline-flex;font-size:smaller;letter-spacing:.5px;list-style-type:none}header input#info:checked~article aside,input[type=radio],input[type=checkbox],section{display:none}form input,form textarea{font-size:16px;width:100%}ul{padding-left:0}form{height:0;opacity:0;transition:all 333ms ease-out;visibility:collapse;width:100%}form table,header input#info:not(:checked)~article input#contact:checked~form{-webkit-transition:all 333ms ease-out;-moz-transition:all 333ms ease-out;-o-transition:all 333ms ease-out;-ms-transition:all 333ms ease-out}form input{height:30px;padding-right:5px}form table{width:100%;transition:all 333ms ease-out}form textarea{line-height:1.33;padding:10px}form td{padding-top:5px}form input[type=submit]{background:#090;color:#cfc;height:35px}.centered{position:absolute;left:50%;padding-top:37px;top:50%;transform:translate(-50%,-50%);width:83%}#tv,header article,header ul{position:relative}.main{background:#f9f6ff;padding-bottom:15px}.side{float:right}.sideline{margin:auto;max-width:960px;width:100%}#tv{background:#fc0;margin-bottom:43px;padding-bottom:56.25%;top:43px;width:100%}header input#info:not(:checked)~article input#contact:checked~form{height:310px;opacity:1;position:relative;top:-20px;visibility:visible;display:inline-block;transition:all 333ms ease-out}header input#info:checked~article,header input#info:checked~article img{-webkit-transition:all 333ms ease-out;-moz-transition:all 333ms ease-out;-o-transition:all 333ms ease-out;-ms-transition:all 333ms ease-out}header input#info:checked~article{margin-top:0;margin-bottom:3px;opacity:0;padding-top:0;padding-bottom:0;transition:all 333ms ease-out;visibility:collapse}header input#info:checked~article img{max-height:0;transition:all 333ms ease-out;width:150px}header article,header input#info:checked~article p{-webkit-transition:all 333ms ease-out;-moz-transition:all 333ms ease-out;-o-transition:all 333ms ease-out;-ms-transition:all 333ms ease-out}header input#info:checked~article p{padding-bottom:0;line-height:0;transition:all 333ms ease-out}nav a:not(#here):not(:hover) span{opacity:.9}nav input#lang:checked~.side{opacity:0;overflow:hidden;transform:translateX(20px);width:0;-webkit-transition:all .3s ease-out;-moz-transition:all .3s ease-out;-o-transition:all .3s ease-out;-ms-transition:all .3s ease-out;transition:all .3s ease-out}nav input#lang+label img:not(:hover){opacity:.9}#tab1:checked~header label:not(.content1) li:hover,#tab2:checked~header label:not(.content2) li:hover,#tab3:checked~header label:not(.content3) li:hover,#tab4:checked~header label:not(.content4) li:hover{background:#fc6}#tab1:checked~header label.content1 li,#tab2:checked~header label.content2 li,#tab3:checked~header label.content3 li,#tab4:checked~header label.content4 li{background:#fc0;color:#303}#tab1:checked~section#content1,#tab2:checked~section#content2,#tab3:checked~section#content3,#tab4:checked~section#content4{display:block}@media only screen and (max-width:35em){header input#info:checked~article img{width:auto;width:50px}}footer{border-top:solid 1px #fcf;color:#606;padding:10px}footer a{color:#606}header article{margin-bottom:15px;margin-top:15px;transition:all 333ms ease-out}header li{background:#fd9;height:37px;padding:10px}header li.menu{border-right:solid 3px #f9f3ff;margin-right:-3px}header li.side{border-left:solid 3px #f9f3ff}header li.side img{margin-top:-3px}header p{line-height:1.33;-webkit-transition:all 333ms ease-out;-moz-transition:all 333ms ease-out;-o-transition:all 333ms ease-out;-ms-transition:all 333ms ease-out;transition:all 333ms ease-out}header ul{background:#edc;border-top:solid 2px #a06;color:#606;margin-bottom:0;text-shadow:0 0 1px #fd6;z-index:1}nav{background-color:#a06;height:43px;position:fixed;width:100%;z-index:2}nav a{color:#fff;text-shadow:0 0 2px #000}nav img#logo{float:left;width:35px;margin:4px 4px 4px 10px}nav img.icon{position:relative;float:right;top:10px;left:-10px;z-index:3}nav li{margin-top:11px;padding:3px 3px 12px}nav li.left{padding-left:4px;padding-right:5px}nav li.menu{border-left:solid 1px #fc0;padding-right:7px;padding-left:11px;z-index:1}nav li.side{background:rgba(170,0,102,.8);opacity:1;top:-11px;padding:14px 12px 12px;position:relative;transform:translateX(0);-webkit-transition:all .3s ease-out;-moz-transition:all .3s ease-out;-o-transition:all .3s ease-out;-ms-transition:all .3s ease-out;transition:all .3s ease-out;min-width:1px}nav li.side span{background-color:#a06;border-radius:4px;padding:6px 6px 6px 7px;position:absolute;right:9px;top:8px}
</style><!---->
<script src="https://www.gstatic.com/firebasejs/4.3.0/firebase.js"></script>
<script>
// Loads the IFrame Player API code asynchronously.
var tag = document.createElement('script');
	tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
// Player switching vars
var index=0,loading,next,player1,player2,playing,stop=0,stopping,tube,videoId;
var playlist=['dIK81cpOXYg','5-q3meXJ6W4','V7t1SToZ-i8','UHElD61QBKY','WkyNf6GBI6M','c8cDM2PN_kY','JG9W2TwDtOM','_fPaBhR21Vw','YB_z0Z3msAQ','AldrdUYHFK4','h1gcPNMC0J4','scMATf60KWI'];
// Observer
var countdownTimer,currentTime,duration;
// Fader
var fade=5,faderIn,fadeInTimer,faderOut,fadeOutTimer;
// Insert the iFrame Players
function onYouTubeIframeAPIReady() {
    player1 = new YT.Player('player_0', { events: {
		'onStateChange': onPlayerStateChange } });
    player2 = new YT.Player('player_1', { events: {
		'onStateChange': onPlayerStateChange } });
	tube = document.getElementsByTagName('iframe');
}		
function mixing(id) { loading=true;
	// validate that video is not currently playing
	if (videoId!=id) { videoId=id;
	index+=1;if(playlist.length==index)index=0;
	stopping=playing;
	if (stop==0) { next=0; stop=1; playing=player1; }
	else { next=1; stop=0; playing=player2; }
	playing.setVolume(0);
	playing.loadVideoById(id); }
}
function onPlayerStateChange(yt) { if (stopping!=yt.target
	&& loading && yt.data==YT.PlayerState.PLAYING)transition();
}	
function transition() {
	faderOut = fade;
	setTimeout(delayedFadeOut,700);
	faderIn = fade;
	fadeInTimer = setInterval(fadeIn,100);
}
function delayedFadeOut() {
	// switch players when transition is halfway
	tube[next].style.visibility = 'visible';
	tube[stop].style.visibility = 'hidden';
	if(stopping!=null)fadeOutTimer=setInterval(fadeOut,100);
	else countdownStart()
}
function fadeOut() {
	// fade out current video
	stopping.setVolume(100-faderOut);
	if (100-faderOut==0) {
		countdownStart();
		stopping.loadVideoById('');
		stopping.setVolume('100');
		clearInterval(fadeOutTimer);
	}
	faderOut += 5;
}
function fadeIn() {
	// fade in new video
	playing.setVolume(0+faderIn);
	if(0+faderIn==100)clearInterval(fadeInTimer);
	faderIn+=5;
}	
function countdownStart() {
	duration=playing.getDuration();
	countdownTimer = setInterval(countdown,1000);
	loading=false;
}
function countdown() {
	// validate that new data is available
	if(!loading)currentTime=playing.getCurrentTime();
	if(currentTime>1 && duration >1 && (duration-currentTime)<10) {
		duration=0;currentTime=0;
		clearInterval(countdownTimer);
		mixing(playlist[index]); }
}
	
// Initialize Firebase
var config = {
    apiKey: "AIzaSyBjNTscuOcDgc3iMVlQ519mS6yC-2V4px0",
    authDomain: "miksing-3bb36.firebaseapp.com",
    databaseURL: "https://miksing-3bb36.firebaseio.com",
    projectId: "miksing-3bb36",
    storageBucket: "miksing-3bb36.appspot.com",
    messagingSenderId: "616604964223"
};
firebase.initializeApp(config);	
var courriel;
var usersRef = firebase.database().ref('users');
	
window.onload = function() {
	document.getElementById('sign-in')
		.addEventListener('click', signIn, false);
    document.getElementById('sign-up')
		.addEventListener('click', signUp, false);
	document.getElementById('validate')
		.addEventListener('click', signValidate, false);
    document.getElementById('canceler')
		.addEventListener('click', signCancel, false);
};
	
// Sign-in button press
function signIn() {
	if (firebase.auth().currentUser) { // [START signout]
        firebase.auth().signOut(); } // [END signout]
    else { var email = document.getElementById('courriel').value;
        var password = document.getElementById('password').value;
        if (email.length < 4) { alert('Please enter an email address.');
          return; }
        if (password.length < 4) { alert('Please enter a password.');
          return; }
        // Sign in with email and pass.
        // [START authwithemail]
        firebase.auth().signInWithEmailAndPassword(email, password)
			.then(function(firebaseUser) {
			
			
			courriel=email; userId();
			
		document.getElementById('name').textContent=snapshot.key;
			
			
   		}).catch(function(error) { // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // [START_EXCLUDE]
          if (errorCode === 'auth/wrong-password') {
            alert('Wrong password.'); }
		  else { alert(errorMessage); }
          console.log(error);
          document.getElementById('sign-in').disabled = false; // [END_EXCLUDE]
        }); // [END authwithemail]
	} document.getElementById('sign-in').disabled = true;
}
	
// Sign-up button press
function signUp() {
	//document.getElementById('username').style.display='block';
	document.getElementById('validate').style.display='inline';
	document.getElementById('canceler').style.display='inline';
	document.getElementById('sign-up').style.display='none';
	document.getElementById('sign-in').style.display='none';
}

function signValidate() {
	var email = document.getElementById('courriel').value;
    var password = document.getElementById('password').value;
    if (email.length < 4) { alert('Please enter an email address.');
      return; }
    if (password.length < 4) { alert('Please enter a password.');
      return; }
    // [START createwithemail]
    firebase.auth().createUserWithEmailAndPassword(email, password)
		.then(function(firebaseUser) { usersRef
			.child(firebase.auth().currentUser.uid)
			.set({name:user,mail:email});
   		}).catch(function(error) {
        var errorCode = error.code;
        var errorMessage = error.message;
        // [START_EXCLUDE]
        if (errorCode == 'auth/weak-password') {
          alert('The password is too weak.'); }
		else { alert(errorMessage); }
        console.log(error); // [END_EXCLUDE]
	}); // [END createwithemail]
}

function signCancel() {
	document.getElementById('validate').style.display='none';
	document.getElementById('canceler').style.display='none';
	document.getElementById('sign-up').style.display='inline';
	document.getElementById('sign-in').style.display='inline';
}

// Database user-infos
function userId() {
	//var email = firebase.auth().currentUser.email;
	var ref = firebase.database().ref('users');
	ref.once('value').then(function(snap) {
		snap.forEach(function(snapshot) {
		if (snapshot.child('mail').val() == courriel){
		document.getElementById('name').textContent=snapshot.key;
	}})});
}


/* Validate username
	var ref = firebase.database().ref('users');
	var username = document.getElementById('username').value;
	if (ref.child(username).exists())alert('WTF!');*/

// testing script
/* document.getElementById("console").textContent="..."; */
// loading animation
/*function videoReady() {loader.style.visibility = 'hidden'}*/
</script>
</html>